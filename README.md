# test.bitrix.local

Установка:
git clone https://github.com/Kotyara76/test.bitrix.local.git local

## Агент сохранения новостей Yandex.

Реализован метод 
\Khudyakov\Agents\RssNews::getLastNews($rssUrl, $iblockId, $newsCount);
1. $rssUrl - адрес rss-ленты Yandex. Доступные адреса здесь: https://news.yandex.ru/export.html
2. $iblockId - ID инфоблока для сохранения
3. $newsCount - количество последних новостей, которые необходимо сохранить.

В инфоблок сохраняется заголовок, описание и дата новости. При сохранении проверяется уникальность.
Оригинальный URL новости сохраняется в свойство с кодом SRC_URL (при его наличии).

Для запуска добавить метод в агенты или запустить вручную из командной строки.

## Вывод точек на Yandex-карте

Реализован шаблон компонента news.list - yandex_maps

Пример подключения в local/public/yandex-maps.php
Для корректной работы в инфоблоке должно быть свойство YANDEX_LOCATION с типом "Привязка к Yandex.Картам"

На карте выводятся все элементы инфоблока в виде точек и названия. Автомасштаб карты.

## Компонент AJAX-формы.

Реализован компонент local/components/khudyakov/ajax.form
Сохраняет результат (название и описание) в инфоблок. ID инфоблока задаётся в настройках.
Пример подключения в local/public/ajax-form.php

Используется не "стандартный AJAX_MODE" битрикса, а AJAX запрос в чистом виде.
